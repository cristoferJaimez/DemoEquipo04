<div class="page-container">
    <!-- Encabezado con opción para regresar -->
    <div class="dashboard-header">
        <img src="assets/logo.png" alt="Logo" class="logo" />
        <h1>Registro de Usuarios</h1>
        <button class="back-button" (click)="goBack()">Regresar</button>
    </div>

    <!-- Formulario para seleccionar el tipo de usuario -->
    <div class="main-content">
        <form (submit)="onSubmit()">
            <h3>Seleccione el tipo de registro</h3>
            <label for="user-type">Tipo de Usuario</label>
            <select id="user-type" (change)="onUserTypeChange($event)">
                <option value="" disabled selected>Seleccione...</option>
                <option value="caregiver">Cuidador</option>
                <option value="user">Usuario</option>
                <option value="vet">Veterinario</option> <!-- Opción para Veterinario -->
            </select>

            <!-- Formulario de Cuidador -->
            <div *ngIf="isCaregiver" class="caregiver-form">
                <h4>Datos del Cuidador</h4>
                <label for="caregiver-name">Nombre</label>
                <input type="text" id="caregiver-name" [(ngModel)]="caregiver.name" name="name" required />

                <label for="caregiver-id">Identificación</label>
                <input type="text" id="caregiver-id" [(ngModel)]="caregiver.id" name="id" required />

                <label for="caregiver-phone">Teléfono</label>
                <input type="tel" id="caregiver-phone" [(ngModel)]="caregiver.phone" name="phone" required />

                <label for="caregiver-experience">Experiencia (años)</label>
                <input type="number" id="caregiver-experience" [(ngModel)]="caregiver.experience" name="experience" required />

                <button type="submit">Registrar Cuidador</button>
            </div>

            <!-- Formulario de Usuario -->
            <div *ngIf="isUser" class="user-form">
                <h4>Datos del Usuario</h4>
                <label for="user-name">Nombre</label>
                <input type="text" id="user-name" [(ngModel)]="user.name" name="name" required />

                <label for="user-id">Identificación</label>
                <input type="text" id="user-id" [(ngModel)]="user.id" name="id" required />

                <label for="user-address">Dirección</label>
                <input type="text" id="user-address" [(ngModel)]="user.address" name="address" required />

                <button type="submit">Registrar Usuario</button>
            </div>

            <!-- Botón para agregar mascotas al usuario, solo visible después de registrar el usuario -->
            <div *ngIf="isUserRegistered" class="add-pet-section">
                <h4>Agregar Mascotas</h4>
                <button type="button" (click)="addPet()">Agregar Mascota</button>

                <!-- Formulario para agregar mascotas -->
                <form *ngIf="showPetForm" (submit)="savePet()">
                    <label for="pet-name">Nombre de la Mascota</label>
                    <input type="text" id="pet-name" [(ngModel)]="pet.name" name="pet-name" required />

                    <label for="pet-species">Especie</label>
                    <select id="pet-species" [(ngModel)]="pet.species" name="pet-species" required>
                        <option value="perro">Perro</option>
                        <option value="gato">Gato</option>
                        <option value="conejo">Conejo</option>
                        <option value="ave">Ave</option>
                        <!-- Añadir más especies -->
                    </select>

                    <label for="pet-age">Edad (años)</label>
                    <input type="number" id="pet-age" [(ngModel)]="pet.age" name="pet-age" required />

                    <label for="pet-vet">Veterinario</label>
                    <select id="pet-vet" [(ngModel)]="pet.vet" name="pet-vet" required>
                        <option *ngFor="let vet of vets" [value]="vet.name">{{ vet.name }}</option>
                    </select>

                    <button type="submit">Guardar Mascota</button>
                </form>

                <!-- Lista de mascotas agregadas -->
                <div *ngIf="pets.length > 0" class="pets-list">
                    <div *ngFor="let pet of pets" class="pet-card">
                        <p><strong>Nombre:</strong> {{ pet.name }}</p>
                        <p><strong>Especie:</strong> {{ pet.species }}</p>
                        <p><strong>Edad:</strong> {{ pet.age }} años</p>
                        <p><strong>Veterinario:</strong> {{ pet.vet }}</p>
                    </div>
                </div>
            </div>

            <!-- Formulario de Veterinario -->
            <div *ngIf="isVet" class="vet-form">
                <h4>Datos del Veterinario</h4>
                <label for="vet-name">Nombre</label>
                <input type="text" id="vet-name" [(ngModel)]="vet.name" name="vet-name" required />

                <label for="vet-id">Identificación</label>
                <input type="text" id="vet-id" [(ngModel)]="vet.id" name="vet-id" required />

                <label for="vet-phone">Teléfono</label>
                <input type="tel" id="vet-phone" [(ngModel)]="vet.phone" name="vet-phone" required />

                <label for="vet-specialty">Especialidad</label>
                <select id="vet-specialty" [(ngModel)]="vet.specialty" name="vet-specialty" required>
                    <option value="general">Medicina General</option>
                    <option value="cirugia">Cirugía</option>
                    <option value="dermatologia">Dermatología</option>
                    <option value="oncologia">Oncología</option>
                    <!-- Añadir más especialidades -->
                </select>

                <button type="submit">Registrar Veterinario</button>
            </div>
        </form>
    </div>
</div>
